@{
    Layout = "_Layout";
}

<div class="container">
    <div class="row">
        <div class="col-lg-2 mb-3">
            <nav class="navbar navbar-light bg-light">
                <div class="container-fluid">
                    <ul class="navbar-nav">
                        <li class="navbar-text">博客管理</li>
                        <li class="nav-item">
                            <a class="nav-link" href="/blog" id="nav_blog_index"><i class="fas fa-angle-right"></i> 首页</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="/blog/posts" id="nav_blog_posts"><i class="fas fa-angle-right"></i> 文章</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="/blog/tags" id="nav_blog_tags"><i class="fas fa-angle-right"></i> 标签</a>
                        </li>
                        <li class="nav-item ">
                            <a class="nav-link text-warning" href="javascript:;" onclick="reloadBlogCache()"><i class="fas fa-angle-right"></i> 清除缓存</a>
                        </li>
                    </ul>
                </div>
            </nav>
        </div>
        <div class="col-lg-10">@RenderBody()</div>
    </div>
</div>

@section Scripts
{
    <script>
        activeNavItem("#nav_blog");

        function reloadBlogCache() {
            window.Swal.fire({
                title: "确认",
                text: "要清除博客的缓存吗？",
                icon: "info",
                showCancelButton: true,
                cancelButtonText: "取消",
                confirmButtonText: "确定"
            }).then((result) => {
                if (result.isConfirmed) {
                    submitRequest("/blog/cache/reload",
                        {
                            contentType: "text/plain",
                            body: "Request by @(Context.User.Identity?.Name) - Force Reload Blog Data button",
                            postAction: function() {
                                window.Swal.fire({
                                    title: "通知",
                                    text: "博客缓存清除成功。",
                                    icon: "success",
                                    backdrop: false
                                });
                            }
                        });
                }
            });
        }
    </script>

    @await RenderSectionAsync("Scripts", false)
}