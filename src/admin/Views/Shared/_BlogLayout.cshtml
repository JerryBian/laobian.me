@{
    Layout = "_Layout";
}

<div>@RenderBody()</div>

@section navbar
{
    <ul class="navbar-nav">
        <li class="navbar-text">博客管理</li>
        <li class="nav-item">
            <a class="nav-link" href="/blog" id="nav_blog_index">首页</a>
        </li>
        <li class="nav-item">
            <a class="nav-link" href="/blog/posts" id="nav_blog_posts">文章</a>
        </li>
        <li class="nav-item">
            <a class="nav-link" href="/blog/tags" id="nav_blog_tags">标签</a>
        </li>
        <li class="nav-item ">
            <a class="nav-link text-warning" href="javascript:;" onclick="reloadBlogCache()">清除缓存</a>
        </li>
    </ul>
}

@section Scripts
{
    <script>
        activeNavItem("#nav_blog");

        function reloadBlogCache() {
            window.Swal.fire({
                title: "确认",
                text: "要清除博客的缓存吗？",
                icon: "info",
                showCancelButton: true,
                cancelButtonText: "取消",
                confirmButtonText: "确定"
            }).then((result) => {
                if (result.isConfirmed) {
                    submitRequest("/blog/cache/reload",
                        {
                            contentType: "text/plain",
                            body: "Request by @(Context.User.Identity?.Name) - Force Reload Blog Data button",
                            postAction: function () {
                                window.Swal.fire({
                                    title: "通知",
                                    text: "博客缓存清除成功。",
                                    icon: "success",
                                    backdrop: false
                                });
                            }
                        });
                }
            });
        }
    </script>

    @await RenderSectionAsync("Scripts", false)
}