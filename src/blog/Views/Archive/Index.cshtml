@model IEnumerable<PostArchiveViewModel>

<div>
    <div class="mb-4">
        @foreach (var item in Model)
        {
            <a class="btn btn-light mb-2 me-2" href="#@item.Link">
                @item.Name <span class="badge bg-info">@item.Count</span>
            </a>
        }
    </div>

    <div class="archive">
        @foreach (var item in Model)
        {
            <h3 id="@item.Link" class="mt-3 mb-2 pb-1 border-bottom">
                <span>@item.Name (@item.Posts.Count)</span>
            </h3>
            <div>
                @foreach (var post in item.Posts)
                {
                    <h4 class="mt-2 mb-2">
                        <span class="text-muted me-2 fs-sm">@post.Metadata.PublishTime.ToChinaDate()</span>
                        <a href="@post.GetFullPath()">
                            <span>@post.Metadata.Title</span>
                        </a>
                    </h4>
                }
            </div>
        }
    </div>
</div>

@section script{
    <script src="~/archive.min.js"></script>
    <script>
        document.addEventListener("DOMContentLoaded",
            function() {
                anchors.options = {
                    placement: 'right',
                    visible: 'hover',
                    base: '@Model.FirstOrDefault()?.BaseUrl'
                };
                anchors.add('.archive h4');
            });
    </script>
}