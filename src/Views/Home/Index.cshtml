@inject IOptions<SwanOption> _option
@inject IHostEnvironment _env
@{
    Layout = null;
}

<!DOCTYPE html>
<html lang="zh">
<head>
    @{
        var buildOption = new HtmlHeadBuildOption
            {
                ApplicationTitleColor = "#2d89ef",
                Description = ViewData[Constants.ViewData.Description]?.ToString(),
                RobotsEnabled = bool.TryParse(ViewData[Constants.ViewData.RobotsEnabled]?.ToString(), out var result) ? result : _env.IsProduction() && Context.User.Identity?.IsAuthenticated != true,
                SafariPinnedTabColor = "#5bbad5",
                ThemeColor = "#ffffff",
                Title = ViewData[Constants.ViewData.Title]?.ToString(),
                BaseTitle = _option.Value.Title,
                BaseImage = $"{_option.Value.BaseUrl}/file/icon/android-chrome-512x512.png",
                Image = ViewData[Constants.ViewData.Image]?.ToString(),
                DatePublished = ViewData[Constants.ViewData.DatePublished] == null ? DateTime.Now : Convert.ToDateTime(ViewData[Constants.ViewData.DatePublished]),
                DateModified = ViewData[Constants.ViewData.DateModified] == null ? DateTime.Now : Convert.ToDateTime(Constants.ViewData.DateModified)
            };

        var headerBuilder = new HtmlHeadBuilder(_option.Value, buildOption);
        @Html.Raw(headerBuilder.Build())
    }

    <link href="~/style.min.css" rel="stylesheet" asp-append-version="true" />
</head>
<body class="bg-light p-2">
    <div class="d-flex min-vh-100 w-100 flex-column justify-content-center align-items-center">
        <div class="text-center">
            <img class="d-block mx-auto mb-4" src="/file/icon/favicon-512x512.png" width="64" height="64">
            <h1 class="display-5 fw-bold">@_option.Value.Title</h1>
            <div class="col-lg-6 mx-auto">
                <div class="lead mb-4">
                    @Html.Raw(_option.Value.Description)
                </div>
                <div class="d-grid gap-2 d-sm-flex justify-content-sm-center">
                    <a href="/blog" class="btn btn-primary btn-lg px-4 gap-3 text-nowrap"><i class="bi bi-type-bold"></i> 博客</a>
                    <a href="/read" class="btn btn-outline-info btn-lg px-4 text-nowrap"><i class="bi bi-book"></i> 阅读</a>
                </div>
            </div>
        </div>
    </div>

    @if (_env.IsProduction())
    {
        <!-- Google tag (gtag.js) -->
        <script async src="https://www.googletagmanager.com/gtag/js?id=G-SBZLD4LKPB"></script>
        <script>
            window.dataLayer = window.dataLayer || [];
            function gtag() { dataLayer.push(arguments); }
            gtag('js', new Date());

            gtag('config', 'G-SBZLD4LKPB');
        </script>
    }
</body>
</html>